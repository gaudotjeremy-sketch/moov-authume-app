<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>B√©n√©vole ‚Äî Moov Authume ü§ù</title>
    <link rel="stylesheet" href="/static/style.css">
    <script>
        async function validateCode() {
            const code = document.getElementById("code").value;
            const event_id = document.getElementById("event_id").value;
            const volunteer_id = document.getElementById("volunteer_id").value;
            const bon_type = document.getElementById("bon_type").value;

            const response = await fetch("/validate", {
                method: "POST",
                headers: { "Content-Type": "application/x-www-form-urlencoded" },
                body: `code=${code}&event_id=${event_id}&volunteer_id=${volunteer_id}&bon_type=${bon_type}`
            });
            const result = await response.json();
            const msg = document.getElementById("message");
            msg.innerHTML = result.message;
            msg.className = result.status;
        }
    </script>
</head>
<body>
    <div class="container">
        <h1>ü§ù Espace B√©n√©vole</h1>
        <a href="/" class="button home">üè† Accueil</a>

        <div class="form-grid">
            <input type="text" id="code" placeholder="Scanner ou entrer le code QR ici">
            <select id="event_id">
                {% for e in events %}
                <option value="{{ e.id }}">{{ e.name }} ({{ e.date }})</option>
                {% endfor %}
            </select>
            <select id="volunteer_id">
                {% for v in volunteers %}
                <option value="{{ v.id }}">{{ v.name }}</option>
                {% endfor %}
            </select>
            <select id="bon_type">
                <option value="boisson">ü•§ Boisson</option>
                <option value="repas">üçî Repas</option>
            </select>
            <button onclick="validateCode()">‚úÖ Valider</button>
        </div>

        <div id="message" class="message"></div>
    </div>
</body>
</html>


loadSelects();
</script>
</body>
</html>
