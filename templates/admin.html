<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>ğŸ‘‘ Espace Administrateur - Moov Authume</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, sans-serif;
            background: #f7f9fc;
            color: #333;
            margin: 0;
            padding: 20px;
        }

        h1, h2, h3 {
            color: #222;
        }

        h1 {
            text-align: center;
            font-size: 2em;
            margin-bottom: 10px;
        }

        nav {
            text-align: center;
            margin-bottom: 25px;
        }

        nav a {
            background: #007bff;
            color: white;
            padding: 10px 18px;
            margin: 0 5px;
            border-radius: 8px;
            text-decoration: none;
            transition: 0.3s;
        }

        nav a:hover {
            background: #0056b3;
        }

        section {
            background: white;
            padding: 15px 25px;
            border-radius: 12px;
            box-shadow: 0 2px 6px rgba(0,0,0,0.1);
            margin-bottom: 25px;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 10px;
        }

        th, td {
            border: 1px solid #eee;
            padding: 8px;
            text-align: center;
        }

        th {
            background: #f1f1f1;
        }

        button {
            background: #28a745;
            color: white;
            border: none;
            padding: 8px 12px;
            border-radius: 6px;
            cursor: pointer;
            transition: 0.3s;
        }

        button:hover {
            background: #218838;
        }

        input, select {
            padding: 6px;
            border: 1px solid #ccc;
            border-radius: 6px;
            margin-right: 5px;
        }

        img {
            border: 2px solid #ddd;
            border-radius: 8px;
            padding: 4px;
            background: #fff;
        }

        .delete-btn {
            background: #dc3545;
        }

        .delete-btn:hover {
            background: #b02a37;
        }

        footer {
            text-align: center;
            margin-top: 40px;
            color: #666;
        }
    </style>
</head>
<body>
    <h1>ğŸ‘‘ Panneau dâ€™administration - <strong>Moov Authume</strong></h1>

    <form action="{{ url_for('logout') }}" method="post" style="text-align:right;">
        <button class="delete-btn" type="submit">ğŸšª DÃ©connexion</button>
    </form>

    <nav>
        <a href="/">ğŸ  Accueil</a>
        <a href="{{ url_for('benevole') }}">ğŸ¤ Espace BÃ©nÃ©vole</a>
        <a href="{{ url_for('admin') }}">âš™ï¸ Actualiser</a>
    </nav>

    <!-- AJOUT D'ADHERENT -->
    <section>
        <h2>ğŸ†• Ajouter un adhÃ©rent</h2>
        <form action="{{ url_for('add_member') }}" method="post">
            <input type="text" name="nom" placeholder="ğŸ‘¤ Nom" required>
            <input type="text" name="prenom" placeholder="ğŸ§ PrÃ©nom" required>
            <input type="email" name="email" placeholder="ğŸ“§ Email" required>
            <input type="date" name="valid_until" required>
            <button type="submit">âœ… Ajouter</button>
        </form>
    </section>

    <!-- LISTE DES ADHERENTS -->
    <section>
        <h2>ğŸ“‹ Liste des adhÃ©rents</h2>
        {% if members %}
        <table>
            <tr>
                <th>ğŸ‘¤ Nom</th>
                <th>ğŸ§ PrÃ©nom</th>
                <th>ğŸ“§ Email</th>
                <th>ğŸ“… ValiditÃ©</th>
                <th>ğŸ”— QR Code</th>
                <th>ğŸ—‘ï¸ Supprimer</th>
            </tr>
            {% for member in members %}
            <tr>
                <td>{{ member[1] }}</td>
                <td>{{ member[2] }}</td>
                <td>{{ member[3] }}</td>
                <td>{{ member[4] }}</td>
                <td>
                    <img src="{{ url_for('static', filename='qrcodes/' + member[5]) }}" width="90" alt="QR">
                </td>
                <td>
                    <form action="{{ url_for('delete_member') }}" method="post">
                        <input type="hidden" name="id" value="{{ member[0] }}">
                        <button class="delete-btn" type="submit">ğŸ—‘ï¸</button>
                    </form>
                </td>
            </tr>
            {% endfor %}
        </table>
        {% else %}
            <p>Aucun adhÃ©rent enregistrÃ© pour le moment ğŸ’¤</p>
        {% endif %}
    </section>

    <!-- BENEVOLES -->
    <section>
        <h2>ğŸ™Œ Gestion des bÃ©nÃ©voles</h2>
        <form action="{{ url_for('add_volunteer') }}" method="post">
            <input type="text" name="nom" placeholder="âœï¸ Nom du bÃ©nÃ©vole" required>
            <button type="submit">â• Ajouter</button>
        </form>

        <h3>ğŸ“œ Liste des bÃ©nÃ©voles</h3>
        <ul>
            {% for volunteer in volunteers %}
                <li>ğŸ¤ {{ volunteer[1] }}
                    <form action="{{ url_for('delete_volunteer') }}" method="post" style="display:inline;">
                        <input type="hidden" name="id" value="{{ volunteer[0] }}">
                        <button class="delete-btn" type="submit">ğŸ—‘ï¸</button>
                    </form>
                </li>
            {% endfor %}
        </ul>
    </section>

    <!-- EVENEMENTS -->
    <section>
        <h2>ğŸ‰ CrÃ©er un Ã©vÃ©nement</h2>
        <form action="{{ url_for('add_event') }}" method="post">
            <input type="text" name="nom" placeholder="ğŸŠ Nom de l'Ã©vÃ©nement" required>
            <input type="date" name="date" required>
            <input type="number" name="bons_boisson" placeholder="ğŸ¹ Bons boisson" min="0">
            <input type="number" name="bons_repas" placeholder="ğŸ½ï¸ Bons repas" min="0">
            <input type="number" name="bons_autre" placeholder="ğŸŸï¸ Autres bons" min="0">
            <button type="submit">ğŸš€ CrÃ©er</button>
        </form>

        <h3>ğŸ“… Liste des Ã©vÃ©nements</h3>
        {% if events %}
        <table>
            <tr>
                <th>ğŸŠ Nom</th>
                <th>ğŸ“… Date</th>
                <th>ğŸ¹ Boisson</th>
                <th>ğŸ½ï¸ Repas</th>
                <th>ğŸŸï¸ Autres</th>
            </tr>
            {% for event in events %}
            <tr>
                <td>{{ event[1] }}</td>
                <td>{{ event[2] }}</td>
                <td>{{ event[3] }}</td>
                <td>{{ event[4] }}</td>
                <td>{{ event[5] }}</td>
            </tr>
            {% endfor %}
        </table>
        {% else %}
            <p>Aucun Ã©vÃ©nement pour le moment ğŸˆ</p>
        {% endif %}
    </section>

    <footer>
        <p>ğŸŒ Moov Authume â€” Interface Admin v2.5 | DÃ©veloppÃ©e avec â¤ï¸</p>
    </footer>
</body>
</html>

