<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Admin – Moov Authume</title>
  <link rel="stylesheet" href="/static/style.css">
</head>
<body>
  <h1>Espace Administrateur</h1>

  <h2>👤 Ajouter un adhérent</h2>
  <form method="POST" action="/add_member">
    <input name="name" placeholder="Nom complet" required>
    <input name="email" placeholder="Email" required>
    <input type="date" name="valid_until" required>
    <button>Ajouter</button>
  </form>

  <h3>Liste des adhérents</h3>
  <table>
    <tr><th>Nom</th><th>Email</th><th>Valide jusqu’au</th><th>QR Code</th><th>Action</th></tr>
    {% for m in data.members %}
    <tr>
      <td>{{ m.name }}</td>
      <td>{{ m.email }}</td>
      <td>{{ m.valid_until }}</td>
      <td><img src="data:image/png;base64,{{ m.qr }}" width="80"></td>
      <td>
        <form method="POST" action="/delete_member">
          <input type="hidden" name="id" value="{{ m.id }}">
          <button>Supprimer</button>
        </form>
      </td>
    </tr>
    {% endfor %}
  </table>

  <h2>🎉 Événements</h2>
  <form method="POST" action="/add_event">
    <input name="event_name" placeholder="Nom de l’événement" required>
    <input type="number" name="boisson" placeholder="Bons boisson" min="0" required>
    <input type="number" name="repas" placeholder="Bons repas" min="0" required>
    <input type="number" name="autre" placeholder="Bons autre" min="0" required>
    <button>Créer</button>
  </form>

  <ul>
    {% for e in data.events %}
    <li>
      {{ e.name }} (boisson: {{ e.bons.boisson }}, repas: {{ e.bons.repas }}, autre: {{ e.bons.autre }})
      <form method="POST" action="/delete_event">
        <input type="hidden" name="id" value="{{ e.id }}">
        <button>Supprimer</button>
      </form>
    </li>
    {% endfor %}
  </ul>

  <h2>🤝 Bénévoles</h2>
  <form method="POST" action="/add_volunteer">
    <input name="vol_name" placeholder="Nom du bénévole" required>
    <button>Ajouter</button>
  </form>

  <ul>
    {% for v in data.volunteers %}
    <li>
      {{ v.name }}
      <form method="POST" action="/delete_volunteer">
        <input type="hidden" name="id" value="{{ v.id }}">
        <button>Supprimer</button>
      </form>
    </li>
    {% endfor %}
  </ul>

</body>
</html>
