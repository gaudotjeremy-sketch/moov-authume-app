<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Espace Admin 🧠</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <header>
        <img src="{{ url_for('static', filename='logo.png') }}" alt="Logo">
        Admin Moov Authume 🧠
    </header>

    <div style="margin-top:10px;">
        <a href="/"><button>🏠 Accueil</button></a>
        <a href="/benevole"><button>👷 Espace Bénévole</button></a>
        <a href="/admin"><button style="background:#0288d1;">⚙️ Espace Admin</button></a>
    </div>

    <h2>👤 Gestion des Adhérents</h2>
    <form method="POST" action="/add_member">
        <input name="nom" placeholder="Nom" required>
        <input name="prenom" placeholder="Prénom" required>
        <input name="email" type="email" placeholder="Email" required>
        <label>Validité jusqu'au :</label>
        <input name="valid_until" type="date" required>
        <button type="submit">➕ Ajouter</button>
    </form>

    {% for m in members %}
        <div class="card">
            <p><b>{{ m[1] }} {{ m[2] }}</b></p>
            <p>{{ m[3] }}</p>
            <p>Validité : {{ m[4] }}</p>
            <img src="/static/qrcodes/{{ m[5] }}.png" class="qr-img">
            <form method="POST" action="/delete_member">
                <input type="hidden" name="id" value="{{ m[0] }}">
                <button type="submit">🗑️ Supprimer</button>
            </form>
        </div>
    {% endfor %}

    <hr>

    <h2>🙋 Gestion des Bénévoles</h2>
    <form method="POST" action="/add_volunteer">
        <input name="nom" placeholder="Nom du bénévole" required>
        <button type="submit">➕ Ajouter</button>
    </form>

    {% for v in volunteers %}
        <div class="card">
            <p>{{ v[1] }}</p>
            <form method="POST" action="/delete_volunteer">
                <input type="hidden" name="id" value="{{ v[0] }}">
                <button type="submit">🗑️ Supprimer</button>
            </form>
        </div>
    {% endfor %}

    <hr>

    <h2>🎟️ Gestion des Événements</h2>
    <form method="POST" action="/add_event">
        <input name="nom" placeholder="Nom de l'événement" required>
        <input type="date" name="date" required>
        <input type="number" name="bons_boisson" placeholder="Bons boisson" value="1" min="0">
        <input type="number" name="bons_repas" placeholder="Bons repas" value="0" min="0">
        <input type="number" name="bons_autre" placeholder="Bons autre" value="0" min="0">
        <button type="submit">📅 Ajouter</button>
    </form>

    {% for e in events %}
        <div class="card">
            <p><b>{{ e[1] }}</b> ({{ e[2] }})</p>
            <p>🥤 Bons boisson : {{ e[3] }}</p>
            <p>🍔 Bons repas : {{ e[4] }}</p>
            <p>🎁 Bons autre : {{ e[5] }}</p>
        </div>
    {% endfor %}

    <footer>© 2025 Moov Authume 💙</footer>
</body>
</html>

