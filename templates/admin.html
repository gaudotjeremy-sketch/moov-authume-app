<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Admin — Moov Authume 👑</title>
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>
    <div class="container">
        <h1>👑 Espace Admin</h1>
        <a href="/" class="button home">🏠 Accueil</a>

        <section>
            <h2>🧍 Adhérents</h2>
            <form action="/add_member" method="POST" class="form-grid">
                <input type="text" name="name" placeholder="Nom complet" required>
                <input type="email" name="email" placeholder="Email" required>
                <input type="date" name="valid_until" required>
                <button type="submit">➕ Ajouter</button>
            </form>

            <table>
                <tr><th>Nom</th><th>Email</th><th>Validité</th><th>QR Code</th><th>Actions</th></tr>
                {% for m in members %}
                <tr>
                    <td>{{ m.name }}</td>
                    <td>{{ m.email }}</td>
                    <td>{{ m.valid_until }}</td>
                    <td><img src="/qrcode/{{ m.id }}" width="80"></td>
                    <td>
                        <form action="/extend_member/{{ m.id }}" method="POST" style="display:inline;">
                            <input type="date" name="valid_until" required>
                            <button>⏩ Prolonger</button>
                        </form>
                        <a href="/delete_member/{{ m.id }}" class="button danger">🗑️ Supprimer</a>
                    </td>
                </tr>
                {% endfor %}
            </table>
        </section>

        <section>
            <h2>🎟️ Événements</h2>
            <form action="/add_event" method="POST" class="form-grid">
                <input type="text" name="event_name" placeholder="Nom de l'événement" required>
                <input type="date" name="event_date" required>
                <input type="number" name="drink_limit" placeholder="Nb bons boisson" required>
                <input type="number" name="food_limit" placeholder="Nb bons repas" required>
                <button type="submit">➕ Ajouter</button>
            </form>

            <table>
                <tr><th>Nom</th><th>Date</th><th>Bons</th><th>Actions</th></tr>
                {% for e in events %}
                <tr>
                    <td>{{ e.name }}</td>
                    <td>{{ e.date }}</td>
                    <td>🥤 {{ e.limits.boisson }} / 🍔 {{ e.limits.repas }}</td>
                    <td><a href="/delete_event/{{ e.id }}" class="button danger">🗑️ Supprimer</a></td>
                </tr>
                {% endfor %}
            </table>
        </section>

        <section>
            <h2>🤝 Bénévoles</h2>
            <form action="/add_volunteer" method="POST" class="form-grid">
                <input type="text" name="volunteer_name" placeholder="Nom bénévole" required>
                <button type="submit">➕ Ajouter</button>
            </form>

            <table>
                <tr><th>Nom</th><th>Actions</th></tr>
                {% for v in volunteers %}
                <tr>
                    <td>{{ v.name }}</td>
                    <td><a href="/delete_volunteer/{{ v.id }}" class="button danger">🗑️ Supprimer</a></td>
                </tr>
                {% endfor %}
            </table>
        </section>
    </div>
</body>
</html>
