<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>Login - Moov Authume</title>
<link rel="stylesheet" href="styles.css">
</head>
<body>
<div class="container">
  <div class="header">
    <img src="logo.png" class="logo">
    <h1>Moov Authume — Espace administrateur</h1>
  </div>

  <div class="card">
    <p>Entrez le mot de passe administrateur :</p>
    <input id="pw" type="password" placeholder="Mot de passe admin">
    <br>
    <button onclick="login()">Se connecter</button>
    <p id="msg" class="small"></p>
    <p class="small">Les bénévoles utilisent l'interface <a href="scanner.html">Scanner</a>.</p>
  </div>
</div>

<script>
async function login(){
  const pw = document.getElementById('pw').value;
  const r = await fetch('/api/admin/login', {method:'POST', headers:{'Content-Type':'application/json'}, body: JSON.stringify({password:pw})});
  if(r.status===200){
    const j = await r.json();
    if(j.success) location.href = '/admin.html';
    else document.getElementById('msg').innerText = j.error || 'Erreur';
  } else {
    const j = await r.json();
    document.getElementById('msg').innerText = j.error || 'Impossible de se connecter';
  }
}
</script>
</body>
</html>
